## Время связывания переменных

Одним из аспектов инициализации, серьезно влияющим на удобство сопровождения и изменения программы, является время связывания — момент, когда переменная и ее значение связываются вместе. Связываются ли они при написании кода? При его компиляции? При загрузке? При выполнении программы? В другое время?

На первый взгляд, это не имеет значения, когда мы выполняем, например, простейшее присваивание "x = 0".
Но здесь имеется важное правило:
**- чем позже вы выполняете связывание, тем более гибким будет ваш код, но и более сложным;

- чем раньше вы выполняете связывание, тем менее гибким будет ваш код, но и менее сложным.**

1. Пример максимально раннего связывания, во время написания кода:

```
titleBar.color = 255;
```

Значение (цвет компонента) связывается с переменной titleBar.color во время написания кода, поскольку 255 — числовая константа, жёстко закодированная в программе. Это неудачное решение, потому что если позже мы захотим вместо цвета 255 использовать цвет 128, придётся отыскивать все места в коде, где 255 используется как цвет.

2. Мы уже разбирали, что делать в таких случаях – надо определить константу:

```
private static final int COLOR_WHITE = 255;
…
titleBar.color = COLOR_WHITE;
```

Теперь связывание переменной выполняется чуть позднее -- во время компиляции кода.

3. Наконец, можно выполнять связывание во время выполнения программы:

```
titleBar.color = ReadTitleBarColor(); 
```

ReadTitleBarColor() — это метод, который во время выполнения программы считывает подходящее значение цвета компонента, например, из стандартных системных настроек ОС, или из файла конфигурации. Такой подход наиболее оптимален: теперь, чтобы изменить значение titleBar.color, вам не потребуется изменять и пересобирать всю программу -- достаточно просто изменить содержание файла с настройками.

4. Время связывания может дополнительно определяться тем, когда вызывается метод ReadTitleBarColor() – при начальной загрузке всей программы, при создании окна с компонентом, при каждой перерисовке этого окна… Чем более поздним становится время связывания, тем большее внимание следует уделять производительности ReadTitleBarColor(): например, в компьютерной игре перерисовка экрана может выполняться сотни раз в секунду, и каждый раз считывать нужное значение из файла будет, конечно, крайне неэффективным.

**Резюме.**

Именованные константы всегда предпочтительнее магических чисел, и с их помощью можно получить высокую гибкость, просто используя хорошие методики программирования. Однако при этом повышается объём и сложность кода, параметризуемого константами, а вместе с ней и вероятность ошибок. Поэтому на практике надо обеспечивать такой уровень гибкости, какой нужен для прямого удовлетворения требований, но не более того.
